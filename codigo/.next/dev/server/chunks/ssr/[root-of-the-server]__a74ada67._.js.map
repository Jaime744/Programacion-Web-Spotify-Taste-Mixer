{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Github/Programacion-Web-Spotify-Taste-Mixer/spotify/src/lib/auth.js"],"sourcesContent":["async function spotifyRequest(url) {\r\n  const token = getAccessToken();\r\n  \r\n  if (!token) {\r\n    // Intentar refrescar token\r\n    const newToken = await refreshAccessToken();\r\n    if (!newToken) {\r\n      // Redirigir a login\r\n      window.location.href = '/';\r\n      return;\r\n    }\r\n  }\r\n\r\n  const response = await fetch(url, {\r\n    headers: { 'Authorization': `Bearer ${token}` }\r\n  });\r\n\r\n  if (response.status === 401) {\r\n    // Token expirado, refrescar\r\n    const newToken = await refreshAccessToken();\r\n    // Reintentar petición\r\n  }\r\n\r\n  if (!response.ok) {\r\n    throw new Error(`Error ${response.status}: ${response.statusText}`);\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\n// Generar string aleatorio para el parámetro 'state'\r\nexport function generateRandomString(length) {\r\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  let text = '';\r\n  for (let i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n  return text;\r\n}\r\n\r\n// Construir URL de autorización de Spotify\r\nexport function getSpotifyAuthUrl() {\r\n  const clientId = process.env.NEXT_PUBLIC_SPOTIFY_CLIENT_ID || '';\r\n  const redirectUri = process.env.NEXT_PUBLIC_REDIRECT_URI || '';\r\n  const state = generateRandomString(16);\r\n\r\n  // Guardar el state para validación posterior \r\n  if (typeof window !== 'undefined') {  \r\n    localStorage.setItem('spotify_auth_state', state);  \r\n  }\r\n\r\n  const scope = [\r\n    'user-read-private',\r\n    'user-read-email',\r\n    'user-top-read',\r\n    'playlist-modify-public',\r\n    'playlist-modify-private'\r\n  ].join(' ');\r\n\r\n  const params = new URLSearchParams({\r\n    client_id: clientId,\r\n    response_type: 'code',\r\n    redirect_uri: redirectUri,\r\n    state: state,\r\n    scope: scope\r\n  });\r\n\r\n  return `https://accounts.spotify.com/authorize?${params.toString()}`;\r\n}\r\n\r\n// Guardar tokens en localStorage\r\nexport function saveTokens(accessToken, refreshToken, expiresIn) {\r\n  const expirationTime = Date.now() + expiresIn * 1000;\r\n  if (typeof window !== 'undefined') {  \r\n    localStorage.setItem('spotify_token', accessToken);\r\n    localStorage.setItem('spotify_refresh_token', refreshToken);\r\n    localStorage.setItem('spotify_token_expiration', expirationTime.toString());\r\n  }\r\n}\r\n\r\n// Obtener token actual (con verificación de expiración)\r\nexport function getAccessToken() {\r\n  \r\n  if (typeof window === \"undefined\") {\r\n    return null;  \r\n  }\r\n\r\n  const token = localStorage.getItem('spotify_token');\r\n  const expiration = localStorage.getItem('spotify_token_expiration');\r\n  \r\n  if (!token || !expiration) return null;\r\n\r\n  // Si el token expiro, retorno null\r\n  if (Date.now() > parseInt(expiration)) {\r\n    return null;\r\n  }\r\n\r\n  return token;\r\n}\r\n\r\n// Verificar si hay token válido\r\nexport function isAuthenticated() {\r\n  return getAccessToken() !== null;\r\n}\r\n\r\n// Cerrar sesión\r\nexport function logout() {\r\n  if (typeof window !== 'undefined') {  // Solo ejecutamos esto en el cliente\r\n    localStorage.removeItem('spotify_token');\r\n    localStorage.removeItem('spotify_refresh_token');\r\n    localStorage.removeItem('spotify_token_expiration');\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,eAAe,eAAe,GAAG;IAC/B,MAAM,QAAQ;IAEd,IAAI,CAAC,OAAO;QACV,2BAA2B;QAC3B,MAAM,WAAW,MAAM;QACvB,IAAI,CAAC,UAAU;YACb,oBAAoB;YACpB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACvB;QACF;IACF;IAEA,MAAM,WAAW,MAAM,MAAM,KAAK;QAChC,SAAS;YAAE,iBAAiB,CAAC,OAAO,EAAE,OAAO;QAAC;IAChD;IAEA,IAAI,SAAS,MAAM,KAAK,KAAK;QAC3B,4BAA4B;QAC5B,MAAM,WAAW,MAAM;IACvB,sBAAsB;IACxB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,CAAC,MAAM,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,SAAS,UAAU,EAAE;IACpE;IAEA,OAAO,SAAS,IAAI;AACtB;AAGO,SAAS,qBAAqB,MAAM;IACzC,MAAM,WAAW;IACjB,IAAI,OAAO;IACX,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,IAAK;QAC/B,QAAQ,SAAS,MAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,SAAS,MAAM;IACpE;IACA,OAAO;AACT;AAGO,SAAS;IACd,MAAM,WAAW,wEAA6C;IAC9D,MAAM,cAAc,2EAAwC;IAC5D,MAAM,QAAQ,qBAAqB;IAEnC,8CAA8C;IAC9C;;IAIA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;KACD,CAAC,IAAI,CAAC;IAEP,MAAM,SAAS,IAAI,gBAAgB;QACjC,WAAW;QACX,eAAe;QACf,cAAc;QACd,OAAO;QACP,OAAO;IACT;IAEA,OAAO,CAAC,uCAAuC,EAAE,OAAO,QAAQ,IAAI;AACtE;AAGO,SAAS,WAAW,WAAW,EAAE,YAAY,EAAE,SAAS;IAC7D,MAAM,iBAAiB,KAAK,GAAG,KAAK,YAAY;IAChD;;AAKF;AAGO,SAAS;IAEd,wCAAmC;QACjC,OAAO;IACT;;;IAEA,MAAM;IACN,MAAM;AAUR;AAGO,SAAS;IACd,OAAO,qBAAqB;AAC9B;AAGO,SAAS;IACd;;AAKF","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Github/Programacion-Web-Spotify-Taste-Mixer/spotify/src/components/Widgets/ArtistWidget.jsx"],"sourcesContent":["'use client'; \nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n// función que coge de la api los artistas mas escuchados y te lo muestra\nexport default function ArtistWidget({ accessToken }) {\n  const [artists, setArtists] = useState([]);\n  const [isClient, setIsClient] = useState(false);\n\n  useEffect(() => {\n    setIsClient(true);  \n  }, []);\n\n  useEffect(() => {\n    if (accessToken && isClient) {\n      const fetchArtists = async () => {\n        try {\n          const response = await axios.get(\"https://api.spotify.com/v1/me/top/artists\", {\n            headers: {\n              Authorization: `Bearer ${accessToken}`,\n            },\n          });\n          setArtists(response.data.items);\n        } catch (error) {\n          console.error(\"Error fetching artists:\", error);\n        }\n      };\n      fetchArtists();\n    }\n  }, [accessToken, isClient]);\n\n  if (!isClient) {\n    return null;\n  }\n\n  return (\n    <div className=\"widget\">\n      <ul>\n        <h2>Tus artistas favoritos</h2>\n        {artists.length > 0 ? (\n          artists.map((artist) => (\n            <li key={artist.id}>\n              <img src={artist.images[0]?.url} alt={artist.name} width={50} />\n              <span>{artist.name}</span>\n            </li>\n          ))\n        ) : (\n          <p>Loading artists...</p>\n        )}\n      </ul>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS,aAAa,EAAE,WAAW,EAAE;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,IAAA,kNAAS,EAAC;QACR,YAAY;IACd,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAI,eAAe,UAAU;YAC3B,MAAM,eAAe;gBACnB,IAAI;oBACF,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAC,6CAA6C;wBAC5E,SAAS;4BACP,eAAe,CAAC,OAAO,EAAE,aAAa;wBACxC;oBACF;oBACA,WAAW,SAAS,IAAI,CAAC,KAAK;gBAChC,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,2BAA2B;gBAC3C;YACF;YACA;QACF;IACF,GAAG;QAAC;QAAa;KAAS;IAE1B,IAAI,CAAC,UAAU;QACb,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;;8BACC,8OAAC;8BAAG;;;;;;gBACH,QAAQ,MAAM,GAAG,IAChB,QAAQ,GAAG,CAAC,CAAC,uBACX,8OAAC;;0CACC,8OAAC;gCAAI,KAAK,OAAO,MAAM,CAAC,EAAE,EAAE;gCAAK,KAAK,OAAO,IAAI;gCAAE,OAAO;;;;;;0CAC1D,8OAAC;0CAAM,OAAO,IAAI;;;;;;;uBAFX,OAAO,EAAE;;;;8CAMpB,8OAAC;8BAAE;;;;;;;;;;;;;;;;;AAKb","debugId":null}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Github/Programacion-Web-Spotify-Taste-Mixer/spotify/src/components/widgets/DecadeWidget.jsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nexport default function DecadeWidget({ accessToken }) {\n  const [decades, setDecades] = useState([]);\n  const [tracks, setTracks] = useState([]);\n  const [selectedDecade, setSelectedDecade] = useState('');\n\n  const handleSearch = async () => {\n    if (selectedDecade) {\n      try {\n        const response = await axios.get(\n          `https://api.spotify.com/v1/search?type=track&q=year:${selectedDecade}`,\n          {\n            headers: {\n              Authorization: `Bearer ${accessToken}`,\n            },\n          }\n        );\n        setTracks(response.data.tracks.items);\n      } catch (error) {\n        console.error('Error fetching tracks:', error);\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (selectedDecade) {\n      handleSearch();\n    }\n  }, [selectedDecade]);\n\n  return (\n    <div className=\"widget\">\n      <h2>Selecciona una década</h2>\n      <select \n        className=\"decade-dropdown\" \n        value={selectedDecade} \n        onChange={(e) => setSelectedDecade(e.target.value)}\n      >\n        <option value=\"\">Seleccionar década</option>\n        {['1950s', '1960s', '1970s', '1980s', '1990s', '2000s', '2010s', '2020s'].map((decade) => (\n          <option key={decade} value={decade}>\n            {decade}\n          </option>\n        ))}\n      </select>\n      \n      <ul>\n        {tracks.map((track) => (\n          <li key={track.id}>\n            <img src={track.album.images[2]?.url} alt={track.name} />\n            <div>\n              <span>{track.name}</span>\n              <span>{track.artists[0].name}</span>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAIe,SAAS,aAAa,EAAE,WAAW,EAAE;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACzC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACvC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,MAAM,eAAe;QACnB,IAAI,gBAAgB;YAClB,IAAI;gBACF,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAC9B,CAAC,oDAAoD,EAAE,gBAAgB,EACvE;oBACE,SAAS;wBACP,eAAe,CAAC,OAAO,EAAE,aAAa;oBACxC;gBACF;gBAEF,UAAU,SAAS,IAAI,CAAC,MAAM,CAAC,KAAK;YACtC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,0BAA0B;YAC1C;QACF;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,IAAI,gBAAgB;YAClB;QACF;IACF,GAAG;QAAC;KAAe;IAEnB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;0BAAG;;;;;;0BACJ,8OAAC;gBACC,WAAU;gBACV,OAAO;gBACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;;kCAEjD,8OAAC;wBAAO,OAAM;kCAAG;;;;;;oBAChB;wBAAC;wBAAS;wBAAS;wBAAS;wBAAS;wBAAS;wBAAS;wBAAS;qBAAQ,CAAC,GAAG,CAAC,CAAC,uBAC7E,8OAAC;4BAAoB,OAAO;sCACzB;2BADU;;;;;;;;;;;0BAMjB,8OAAC;0BACE,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;;0CACC,8OAAC;gCAAI,KAAK,MAAM,KAAK,CAAC,MAAM,CAAC,EAAE,EAAE;gCAAK,KAAK,MAAM,IAAI;;;;;;0CACrD,8OAAC;;kDACC,8OAAC;kDAAM,MAAM,IAAI;;;;;;kDACjB,8OAAC;kDAAM,MAAM,OAAO,CAAC,EAAE,CAAC,IAAI;;;;;;;;;;;;;uBAJvB,MAAM,EAAE;;;;;;;;;;;;;;;;AAW3B","debugId":null}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Github/Programacion-Web-Spotify-Taste-Mixer/spotify/src/components/widgets/GenreWidget.jsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\n\nconst genres = [\n  'acoustic', 'afrobeat', 'alt-rock', 'alternative', 'ambient', 'anime', \n  'black-metal', 'bluegrass', 'blues', 'bossanova', 'brazil', 'breakbeat', \n  'british', 'cantopop', 'chicago-house', 'children', 'chill', 'classical', \n  'club', 'comedy', 'country', 'dance', 'dancehall', 'death-metal', \n  'deep-house', 'detroit-techno', 'disco', 'disney', 'drum-and-bass', \n  'dub', 'dubstep', 'edm', 'electro', 'electronic', 'emo', 'folk', 'forro', \n  'french', 'funk', 'garage', 'german', 'gospel', 'goth', 'grindcore', \n  'groove', 'grunge', 'guitar', 'happy', 'hard-rock', 'hardcore', 'hardstyle', \n  'heavy-metal', 'hip-hop', 'house', 'idm', 'indian', 'indie', 'indie-pop', \n  'industrial', 'iranian', 'j-dance', 'j-idol', 'j-pop', 'j-rock', 'jazz', \n  'k-pop', 'kids', 'latin', 'latino', 'malay', 'mandopop', 'metal', 'metal-misc', \n  'metalcore', 'minimal-techno', 'movies', 'mpb', 'new-age', 'new-release', \n  'opera', 'pagode', 'party', 'philippines-opm', 'piano', 'pop', 'pop-film', \n  'post-dubstep', 'power-pop', 'progressive-house', 'psych-rock', 'punk', \n  'punk-rock', 'r-n-b', 'rainy-day', 'reggae', 'reggaeton', 'road-trip', 'rock', \n  'rock-n-roll', 'rockabilly', 'romance', 'sad', 'salsa', 'samba', 'sertanejo', \n  'show-tunes', 'singer-songwriter', 'ska', 'sleep', 'songwriter', 'soul', \n  'soundtracks', 'spanish', 'study', 'summer', 'swedish', 'synth-pop', 'tango', \n  'techno', 'trance', 'trip-hop', 'turkish', 'work-out', 'world-music'\n];\n\nconst GenreWidget = () => {\n  const [selectedGenres, setSelectedGenres] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const handleGenreSelection = (genre) => {\n    if (selectedGenres.includes(genre)) {\n      setSelectedGenres(selectedGenres.filter(item => item !== genre));\n    } else {\n      if (selectedGenres.length < 5) {\n        setSelectedGenres([...selectedGenres, genre]);\n      }\n    }\n  };\n\n  const filteredGenres = genres.filter(genre => \n    genre.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className=\"widget\">\n      <h2>Genres</h2>\n      <input\n        type=\"text\"\n        placeholder=\"Search genres...\"\n        value={searchTerm}\n        onChange={(e) => setSearchTerm(e.target.value)}\n        className=\"search-input\"\n      />\n      <ul>\n        {filteredGenres.map((genre) => (\n          <li\n            key={genre}\n            onClick={() => handleGenreSelection(genre)}\n            className={selectedGenres.includes(genre) ? 'selected' : ''}\n          >\n            {genre}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default GenreWidget;\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGA,MAAM,SAAS;IACb;IAAY;IAAY;IAAY;IAAe;IAAW;IAC9D;IAAe;IAAa;IAAS;IAAa;IAAU;IAC5D;IAAW;IAAY;IAAiB;IAAY;IAAS;IAC7D;IAAQ;IAAU;IAAW;IAAS;IAAa;IACnD;IAAc;IAAkB;IAAS;IAAU;IACnD;IAAO;IAAW;IAAO;IAAW;IAAc;IAAO;IAAQ;IACjE;IAAU;IAAQ;IAAU;IAAU;IAAU;IAAQ;IACxD;IAAU;IAAU;IAAU;IAAS;IAAa;IAAY;IAChE;IAAe;IAAW;IAAS;IAAO;IAAU;IAAS;IAC7D;IAAc;IAAW;IAAW;IAAU;IAAS;IAAU;IACjE;IAAS;IAAQ;IAAS;IAAU;IAAS;IAAY;IAAS;IAClE;IAAa;IAAkB;IAAU;IAAO;IAAW;IAC3D;IAAS;IAAU;IAAS;IAAmB;IAAS;IAAO;IAC/D;IAAgB;IAAa;IAAqB;IAAc;IAChE;IAAa;IAAS;IAAa;IAAU;IAAa;IAAa;IACvE;IAAe;IAAc;IAAW;IAAO;IAAS;IAAS;IACjE;IAAc;IAAqB;IAAO;IAAS;IAAc;IACjE;IAAe;IAAW;IAAS;IAAU;IAAW;IAAa;IACrE;IAAU;IAAU;IAAY;IAAW;IAAY;CACxD;AAED,MAAM,cAAc;IAClB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACvD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,MAAM,uBAAuB,CAAC;QAC5B,IAAI,eAAe,QAAQ,CAAC,QAAQ;YAClC,kBAAkB,eAAe,MAAM,CAAC,CAAA,OAAQ,SAAS;QAC3D,OAAO;YACL,IAAI,eAAe,MAAM,GAAG,GAAG;gBAC7B,kBAAkB;uBAAI;oBAAgB;iBAAM;YAC9C;QACF;IACF;IAEA,MAAM,iBAAiB,OAAO,MAAM,CAAC,CAAA,QACnC,MAAM,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;IAGrD,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;0BAAG;;;;;;0BACJ,8OAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;gBAC7C,WAAU;;;;;;0BAEZ,8OAAC;0BACE,eAAe,GAAG,CAAC,CAAC,sBACnB,8OAAC;wBAEC,SAAS,IAAM,qBAAqB;wBACpC,WAAW,eAAe,QAAQ,CAAC,SAAS,aAAa;kCAExD;uBAJI;;;;;;;;;;;;;;;;AAUjB;uCAEe","debugId":null}},
    {"offset": {"line": 641, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Github/Programacion-Web-Spotify-Taste-Mixer/spotify/src/components/widgets/TrackWidget.jsx"],"sourcesContent":["'use client'; \nimport React, { useState } from 'react';\nimport axios from 'axios';\n\nconst TrackWidget = () => {\n  const [query, setQuery] = useState('');\n  const [tracks, setTracks] = useState([]);\n  const [selectedTracks, setSelectedTracks] = useState([]);\n\n  const handleSearch = async () => {\n    if (query.trim() !== '') {\n      try {\n        const response = await axios.get(\n          `https://api.spotify.com/v1/search?type=track&q=${query}`,\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('spotify_token')}`,\n            },\n          }\n        );\n        setTracks(response.data.tracks.items);\n      } catch (error) {\n        console.error('Error fetching tracks:', error);\n      }\n    }\n  };\n\n  const handleTrackSelection = (track) => {\n    if (selectedTracks.includes(track.id)) {\n      setSelectedTracks(selectedTracks.filter((id) => id !== track.id));\n    } else {\n      setSelectedTracks([...selectedTracks, track.id]);\n    }\n  };\n\n  return (\n    <div className=\"widget\">\n      <h2>Search Tracks</h2>\n      <input\n        type=\"text\"\n        placeholder=\"Search for songs...\"\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\n        className=\"search-input\"\n      />\n      <ul>\n        {tracks.map((track) => (\n          <li\n            key={track.id}\n            onClick={() => handleTrackSelection(track)}\n            className={selectedTracks.includes(track.id) ? 'selected' : ''}\n          >\n            <img src={track.album.images[0].url} alt={track.name} />\n            <div>\n              <span>{track.name}</span>\n              <span>{track.artists[0].name}</span>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default TrackWidget;\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIA,MAAM,cAAc;IAClB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACvC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAEvD,MAAM,eAAe;QACnB,IAAI,MAAM,IAAI,OAAO,IAAI;YACvB,IAAI;gBACF,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAC9B,CAAC,+CAA+C,EAAE,OAAO,EACzD;oBACE,SAAS;wBACP,eAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,kBAAkB;oBAClE;gBACF;gBAEF,UAAU,SAAS,IAAI,CAAC,MAAM,CAAC,KAAK;YACtC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,0BAA0B;YAC1C;QACF;IACF;IAEA,MAAM,uBAAuB,CAAC;QAC5B,IAAI,eAAe,QAAQ,CAAC,MAAM,EAAE,GAAG;YACrC,kBAAkB,eAAe,MAAM,CAAC,CAAC,KAAO,OAAO,MAAM,EAAE;QACjE,OAAO;YACL,kBAAkB;mBAAI;gBAAgB,MAAM,EAAE;aAAC;QACjD;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;0BAAG;;;;;;0BACJ,8OAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,YAAY,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;gBACxC,WAAU;;;;;;0BAEZ,8OAAC;0BACE,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;wBAEC,SAAS,IAAM,qBAAqB;wBACpC,WAAW,eAAe,QAAQ,CAAC,MAAM,EAAE,IAAI,aAAa;;0CAE5D,8OAAC;gCAAI,KAAK,MAAM,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG;gCAAE,KAAK,MAAM,IAAI;;;;;;0CACpD,8OAAC;;kDACC,8OAAC;kDAAM,MAAM,IAAI;;;;;;kDACjB,8OAAC;kDAAM,MAAM,OAAO,CAAC,EAAE,CAAC,IAAI;;;;;;;;;;;;;uBAPzB,MAAM,EAAE;;;;;;;;;;;;;;;;AAczB;uCAEe","debugId":null}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Github/Programacion-Web-Spotify-Taste-Mixer/spotify/src/components/widgets/ArtistSearchwidget.jsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport default function ArtistSearchWidget({ accessToken }) {\n  const [query, setQuery] = useState('');\n  const [artists, setArtists] = useState([]);\n\n  const handleSearch = async () => {\n    if (query) {\n      try {\n        const response = await axios.get(\n          `https://api.spotify.com/v1/search?type=artist&q=${query}`,\n          {\n            headers: {\n              Authorization: `Bearer ${accessToken}`,\n            },\n          }\n        );\n        setArtists(response.data.artists.items);\n      } catch (error) {\n        console.error('Error fetching artists:', error);\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (query) {\n      handleSearch();\n    } else {\n      setArtists([]);\n    }\n  }, [query]);\n\n  return (\n    <div className=\"widget\">\n      <h2>Buscar Artistas</h2>\n      <input\n        type=\"text\"\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        placeholder=\"Busca un artista (Ej: Anuel)\"\n      />\n      <ul>\n        {artists.map((artist) => (\n          <li key={artist.id}>\n            <img src={artist.images[2]?.url} alt={artist.name} />\n            <div>\n              <span>{artist.name}</span>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS,mBAAmB,EAAE,WAAW,EAAE;IACxD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAEzC,MAAM,eAAe;QACnB,IAAI,OAAO;YACT,IAAI;gBACF,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAC9B,CAAC,gDAAgD,EAAE,OAAO,EAC1D;oBACE,SAAS;wBACP,eAAe,CAAC,OAAO,EAAE,aAAa;oBACxC;gBACF;gBAEF,WAAW,SAAS,IAAI,CAAC,OAAO,CAAC,KAAK;YACxC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,2BAA2B;YAC3C;QACF;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,IAAI,OAAO;YACT;QACF,OAAO;YACL,WAAW,EAAE;QACf;IACF,GAAG;QAAC;KAAM;IAEV,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;0BAAG;;;;;;0BACJ,8OAAC;gBACC,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,aAAY;;;;;;0BAEd,8OAAC;0BACE,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;;0CACC,8OAAC;gCAAI,KAAK,OAAO,MAAM,CAAC,EAAE,EAAE;gCAAK,KAAK,OAAO,IAAI;;;;;;0CACjD,8OAAC;0CACC,cAAA,8OAAC;8CAAM,OAAO,IAAI;;;;;;;;;;;;uBAHb,OAAO,EAAE;;;;;;;;;;;;;;;;AAU5B","debugId":null}},
    {"offset": {"line": 863, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Github/Programacion-Web-Spotify-Taste-Mixer/spotify/src/components/widgets/MoodWidget.jsx"],"sourcesContent":["'use client';\nimport { useState } from 'react';\nimport axios from 'axios';\n\nexport default function MoodWidget({ accessToken }) {\n  const [mood, setMood] = useState('happy');\n  const [energy, setEnergy] = useState(50); // 0 a 100\n  const [valence, setValence] = useState(0.5); // 0 a 1\n  const [danceability, setDanceability] = useState(0.5); // 0 a 1\n  const [acousticness, setAcousticness] = useState(0.5); // 0 a 1\n  const [tracks, setTracks] = useState([]); // Para almacenar las canciones generadas\n  const [loading, setLoading] = useState(false);\n\n  const handleSearch = async () => {\n    setLoading(true);\n    try {\n      let fetchedTracks = [];\n\n      // Obtener canciones de acuerdo con el estado de ánimo y las características\n      const response = await axios.get(\n        `https://api.spotify.com/v1/search?type=track&q=energy:${energy}&valence:${valence}&danceability:${danceability}&acousticness:${acousticness}&limit=10`,\n        {\n          headers: {\n            Authorization: `Bearer ${accessToken}`,\n          },\n        }\n      );\n\n      fetchedTracks = response.data.tracks.items;\n\n      setTracks(fetchedTracks);\n    } catch (error) {\n      console.error(\"Error fetching tracks:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"widget2\">\n  <h2>Buscar Canciones según tu Estado de Ánimo y Características Musicales</h2>\n  \n  {/* Contenedor de controles */}\n    <div className=\"inputs-container\">\n        <label>Energy</label>\n        <input\n        type=\"range\"\n        min=\"0\"\n        max=\"100\"\n        value={energy}\n        onChange={(e) => setEnergy(e.target.value)}\n        />\n\n        <label>Valence</label>\n        <input\n        type=\"range\"\n        min=\"0\"\n        max=\"1\"\n        step=\"0.01\"\n        value={valence}\n        onChange={(e) => setValence(e.target.value)}\n        />\n\n        <label>Danceability</label>\n        <input\n        type=\"range\"\n        min=\"0\"\n        max=\"1\"\n        step=\"0.01\"\n        value={danceability}\n        onChange={(e) => setDanceability(e.target.value)}\n        />\n\n        <label>Acousticness</label>\n        <input\n        type=\"range\"\n        min=\"0\"\n        max=\"1\"\n        step=\"0.01\"\n        value={acousticness}\n        onChange={(e) => setAcousticness(e.target.value)}\n        />\n\n        <label>Estado de ánimo</label>\n        <select value={mood} onChange={(e) => setMood(e.target.value)}>\n        <option value=\"happy\">Happy</option>\n        <option value=\"sad\">Sad</option>\n        <option value=\"energetic\">Energetic</option>\n        <option value=\"calm\">Calm</option>\n        </select>\n\n        <button onClick={handleSearch}>Buscar Canciones</button>\n    </div>\n\n    {/* Contenedor de los resultados */}\n    <div className=\"results-container\">\n        <ul>\n        {tracks.length > 0 ? (\n            tracks.map((track) => (\n            <li key={track.id}>\n                <img src={track.album.images[2]?.url} alt={track.name} />\n                <div>\n                <span>{track.name}</span>\n                <span>{track.artists[0].name}</span>\n                </div>\n            </li>\n            ))\n        ) : (\n            <p>No songs found</p>\n        )}\n        </ul>\n    </div>\n    </div>\n\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1119, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Github/Programacion-Web-Spotify-Taste-Mixer/spotify/src/app/dashboard/page.js"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { isAuthenticated } from '@/lib/auth'; \nimport ArtistWidget from '../../components/Widgets/ArtistWidget';\nimport DecadeWidget from '../../components/widgets/DecadeWidget';\nimport GenreWidget from '../../components/widgets/GenreWidget';\nimport TrackWidget from '../../components/widgets/TrackWidget';\nimport ArtistSearchWidget from '../../components/widgets/ArtistSearchwidget';\nimport MoodWidget from '../../components/widgets/MoodWidget';\n  \nexport default function Dashboard() {\n  const router = useRouter();\n  const [accessToken, setAccessToken] = useState(null);\n\n  useEffect(() => {\n    // Si no está autenticado, redirigir al login\n    if (!isAuthenticated()) {\n      router.push('/');  \n    } else {\n      const token = localStorage.getItem('spotify_token');\n      setAccessToken(token);  \n    }\n  }, [router]);\n\n  if (!accessToken) {\n    return <div>Loading...</div>;  \n  }\n\n   return (\n    <div className=\"dashboard-container\">\n      <div className=\"widget\">\n        <ArtistWidget accessToken={accessToken} />\n      </div>\n      <div className=\"widget\">\n        <ArtistSearchWidget accessToken={accessToken} />\n      </div>\n      <div className=\"widget\">\n        <DecadeWidget accessToken={accessToken} />\n      </div>\n      <div className=\"widget\">\n        <GenreWidget accessToken={accessToken} />\n      </div>\n      <div className=\"widget\">\n        <TrackWidget accessToken={accessToken} />\n      </div>\n      <div className=\"widget2\">\n        <MoodWidget accessToken={accessToken} />\n      </div>\n    </div>\n    \n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;;;;;;;;;;AAYe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,IAAA,kNAAS,EAAC;QACR,6CAA6C;QAC7C,IAAI,CAAC,IAAA,qIAAe,KAAI;YACtB,OAAO,IAAI,CAAC;QACd,OAAO;YACL,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,eAAe;QACjB;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,CAAC,aAAa;QAChB,qBAAO,8OAAC;sBAAI;;;;;;IACd;IAEC,qBACC,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,wJAAY;oBAAC,aAAa;;;;;;;;;;;0BAE7B,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,8JAAkB;oBAAC,aAAa;;;;;;;;;;;0BAEnC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,wJAAY;oBAAC,aAAa;;;;;;;;;;;0BAE7B,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,uJAAW;oBAAC,aAAa;;;;;;;;;;;0BAE5B,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,uJAAW;oBAAC,aAAa;;;;;;;;;;;0BAE5B,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,sJAAU;oBAAC,aAAa;;;;;;;;;;;;;;;;;AAKjC","debugId":null}}]
}